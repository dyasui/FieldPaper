# Data

## Census

```{r}
library(tidyverse)
data <- read_csv("data/data.csv")

```

### Table 1
```{r}
library(stargazer)
data %>% 
  select(pop, mig, migratio, AGE, INCWAGE, unmp_rate, campclosest_dist) %>%
  as.data.frame() %>% 
  stargazer(
    # type = "text", 
    out = "tables/ctysumstats.tex",
    title = "County-Year Summary Statistics",
    label = "ctysumstats",
    covariate.labels = c(
      "Population", "New Migrants", "Migrant/Pop Ratio", "Average Age", 
      "Average Wage", "Unemployment Rate", "Distance to Closest Camp"
    ),
    digits = 2
  )

```

### Figure 1 
```{r}
library(ggplot2)
data %>% 
  ggplot(aes(x = campclosest_dist)) +
  geom_density()

data %>% 
  ggplot(aes(x = logdistclosest)) +
  geom_density()

```

## Distances
```{r}
library(sf)

# read shapefiles and append distances
county_1990_shp <- read_ipums_sf("data/maps/nhgis0025_shape.zip") %>%
  filter( ! STATENAM %in% c("Alaska", "Hawaii") ) %>%
  mutate(id1990 = as.numeric(NHGISST) * 10000 + as.numeric(NHGISCTY)) %>%
  left_join(read_csv("data/distances.csv"), by = c("id1990"))

load("data/ctycmpdist.RData")
camplocations_df <- 
  read_csv("data/BehindBarbedWire_StoryMap/BehindBarbedWire_StoryMap_InternmentCampLocationsMap_Data.csv") %>% 
  st_as_sf(
    .,
    coords = c("Longitude", "Latitude"), 
    crs = 4326
    ) %>% 
  mutate(
    geometry = st_transform(geometry, crs = st_crs(county_1990_shp$geometry))
    )

ggplot() + 
  geom_sf( data = county_1990_shp, aes(fill = campclosest_dist) ) +
  geom_sf( data = camplocations_df, aes(color = "red"))
  scale_fill_continuous() +
  theme_minimal()

```
