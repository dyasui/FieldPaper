{
  "hash": "86bf61184e156f3057803a4a1069fc7f",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Ethnic Enclaves and the Legacy of Internment\nauthors:\n  - name: Dante Yasui\n    affiliation: The University of Oregon\n---\n\n---\nname: data\n---\n\n\n\n## Population and Migration\n\nFor long-run migration data,\nI use the Decennial Census data provided by the US Census Bureau via the \n[Integrated Public Use Microdata Series](https://usa.ipums.org/usa/index.shtml) [@ruggles_steven_ipums_2020].\nThe census samples for which county locations are available include the \n1940, 1950, 1980, and 1990 1% samples, the 1960 5% sample,\nand the 1970 Form 1 Metro 1% sample.\n\nFor the calculation of migration rates between counties, \nI define a migrant as someone who reports that they either\nmoved within the state, between states, or that they were abroad five years ago\n(or in the past 1 year for 1960 respondants). \nThis excludes people who report moving within the same house, \ndidn't report their previous location, or the location is unknown.\n\n\n## Geography\n\nLocations for historical interment camp locations were archived by \n[Densho Encyclopedia](http://encyclopedia.densho.org/War_Relocation_Authority/#Planning_the_Camps)\nand downloaded in csv form via the \n[Behind Barbed Wires story project](https://www.arcgis.com/home/item.html?id=69183af8d45d4f46a9dc4eba99440891).\n\n<!-- I also use 1950 county boundaries derived from 2008 TIGER/line files -->\n<!-- dowloaded from [https://www.nhgis.org/data-availability#gis-files](NHGIS) -->\n<!-- [@manson_steven_national_2022]. -->\n\nAlthough most county borders did not change much in the second half of the 20th\nCentury, there were counties which split, merged, or had name changes which can \nmake cross-decade comparisons difficult.\nFor these reasons, I choose to standardize the set of counties in my analysis to\nthe set of counties as they appear in the year 1990.\nTo map historical county-level data to 1990 county definitions,\nI implement the crosswalk method by [@eckert_method_2020].\nThey overlay historical county boundary shapefiles from [https://www.nhgis.org/](NHGIS)\nonto county boundaries for a specific target year (in this case 1990).\nThe sub-areas created by these overlays are used to calculate a set of geographic weights\nwhich represent the fractions of a 1990 county's area which were within the geographic areas\nof counties as they appear in different decades (specifically the decades between and including 1940 to 1980).\nFor my analysis, I take the crosswalk weights from the example csv file for the end year 1990 \nwhich is published on the authors' \n[github repository](https://github.com/liang-jack-a/EGLP_Crosswalk/tree/master).\n\nI calculate the straight line distances in meters between each 1950 county centroid to each camp location in QGIS\nwith the `Distance Matrix` tool using the Standard (N x T) distance matrix setting.\n\n## Historical counties dataset\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\ncensus_df <- read_csv(here::here(\"./data/migrations_crosswalked.csv\"), show_col_types = F)\nobsbyyear_tbl <- census_df %>% count(Year)\n```\n:::\n\n\n\nAfter narrowing down to counties which can be observed in each census year\nand then translating the historical counties to 1990 county boundaries,\nI am left with \n3082 counties with observable migration rates in 1940,\n108 in 1950, \n410 in 1960, \n115 in 1970, \n254 in 1980, and\n290 in 1990.\n\nMy primary dataset is therefore a pooled-crossection with a total number of\n20 county-year level observations.\nEach observation represents an individual county at a given year in time\nif it had the same borders as it had in 1990.\n\nThe Census Bureau confidentiality standards state that public-use microdata will\ncannot show report locations with populations of less than 100,000 people\n[@federal_committee_on_statistical_methodology_statistical_2005].\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# Crosswalk file from Eckert, Gvirtz, Liang, and Peters (2020)\n# github repo link for replication data:\nurl <- \"https://raw.githubusercontent.com/liang-jack-a/EGLP_Crosswalk/master/Crosswalks/county_crosswalk_endyr_1990.csv\"\ncrosswalk <- read_csv(url) %>%\n  filter(Year %in% 1940:1980) %>% # 1990 counties don't appear as their own rows\n  mutate( # combine state and county codes into single id variable\n    id     = as.numeric(NHGISST) * 10000 + as.numeric(NHGISCTY),\n    id1990 = as.numeric(NHGISST_1990) * 10000 + as.numeric(NHGISCTY_1990)) \n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 95972 Columns: 17\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (8): NHGISST, NHGISCTY, STATENAM, NHGISNAM, NHGISST_1990, NHGISCTY_1990,...\ndbl (9): Year, ICPSRST, ICPSRCTY, area_base, ICPSRST_1990, ICPSRCTY_1990, ar...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\ncrosswalk <- crosswalk %>% \n  bind_rows( # fill in rows for 1990 counties\n    crosswalk %>% \n      distinct(id1990, .keep_all = TRUE) %>% \n      mutate(\n        Year     = 1990,\n        NHGISST  = NHGISST_1990,\n        NHGISCTY = NHGISCTY_1990,\n        STATENAM = STATENAM_1990,\n        NHGISNAM = NHGISNAM_1990,\n        ICPSRST  = ICPSRST_1990,\n        ICPSRCTY = ICPSRCTY_1990,\n        area_base= NA,\n        area     = NA,\n        weight   = 1,\n      )\n  ) \n```\n:::\n\n::: {#fig-comparesamplepops .cell}\n\n```{.r .cell-code .hidden}\n# record set of counties in sample with observable locations\ncounty_sample <- census_df %>% \n  select(Year, id1990) %>%\n  unite(ctyr_id, c(\"id1990\",\"Year\"), remove = TRUE) %>% \n  pull()\n\n# crosswalk historical county population tables from nhgis to 1990 counties\ncountypop_df <- read_csv(here::here(\"data/census/nhgis0019_csv/nhgis0019_ts_nominal_county.csv\")) %>%\n  mutate(id = as.numeric(STATENH)*10000 + as.numeric(COUNTYNH)) %>% \n  right_join(crosswalk, .,\n           by = c(\"id\", \"Year\"=\"YEAR\"),\n           relationship = \"many-to-many\") %>%\n  group_by(Year, id1990, STATENAM_1990, NHGISNAM_1990) %>%\n  summarise(pop = sum(A00AA * weight)) %>% \n  ungroup() %>% \n  unite(ctyr_id, c(\"id1990\",\"Year\"), remove = FALSE)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 18770 Columns: 10\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (8): GISJOIN, STATE, STATEFP, STATENH, COUNTY, COUNTYFP, COUNTYNH, NAME\ndbl (2): YEAR, A00AA\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n`summarise()` has grouped output by 'Year', 'id1990', 'STATENAM_1990'. You can override using the `.groups` argument.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\ncountypop_df <- countypop_df %>% \n  mutate(\n    insample = (ctyr_id %in% county_sample)\n  )\n\nggplot(data = countypop_df, aes(x = pop, fill = insample)) +\n  geom_density(alpha = 0.5) +\n  scale_x_log10() +\n  ggthemes::theme_pander()\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nWarning: Removed 1 row containing non-finite outside the scale range\n(`stat_density()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![comparing observations in sample to out of sample](main_files/figure-html/fig-comparesamplepops-1.png){#fig-comparesamplepops width=672}\n:::\n\nCounty-year level population distributions\n:::\n",
    "supporting": [
      "main_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}